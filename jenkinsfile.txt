pipeline{
    agent any
    stages{
        stage("clean workspace"){
            steps{
                cleanWs()
            }
        }
        stage("checking out from github"){
            steps{
                checkout scmGit(branches: [[name: '*/${Branch}']], 
                userRemoteConfigs: [[url: '${git_url}']])
            }
        }
        stage("checking docker deamon running"){
            steps{
                sh "sudo docker images > /dev/null"
            }
        }
        stage("Building the image file"){
            steps{
                sh "sudo docker build -t imageid1.0."
            }
        }
        stage("Building the image file"){
            steps{
                sh "sudo docker build -t imageid1.0."
            }
        }
        stage("createing the container"){
            steps{
                sh "sudo docker run --name springapp20 -p 8080:8080 -d  imageid1.0:latest"
            }
        }
        stage("tagging the image file"){
            steps{
                sh "sudo docker tag imageid1.0:latest harishdurai/harish:latest"
            }
        }
        stage("pushing the image in docker hub"){
            steps{
                sh "sudo docker push harishdurai/harish:latest"
            }
        }
    }
}